
# cifar10-net.
[cifar10]
input_count=1
layers=cost,reshape1,convpool1,convpool2,convpool3,reshape2,out
active=out
cost=cost
learning_rate=1e-3
epoch=100
batch_size=200

reshape1.type=reshape
reshape1.input=input[0]
reshape1.shape=-1,24,24,3

convpool1.type=conv2d_pool
convpool1.input=reshape1
convpool1.shape=5,5,3,64
convpool1.pool_type=avg
convpool1.pool_size=2

convpool2.type=conv2d_pool
convpool2.input=convpool1
convpool2.shape=5,5,64,64
convpool2.pool_type=avg
convpool2.pool_size=2

convpool3.type=conv2d
convpool3.input=convpool2
convpool3.shape=5,5,64,32

reshape2.type=reshape
reshape2.input=convpool3
reshape2.shape=-1,1152

out.type=full_connect_op
out.input=reshape2
out.n_in=1152
out.n_out=10
out.op=softmax

cost.type=norm2
cost.input=out,__label__

[cifar10_24]
input_count=1
layers=cost,reshape1,norm1,convpool1,convpool2,convpool3,reshape2,relu,out
active=out
cost=cost
learning_rate=1e-5
epoch=100
batch_size=200

reshape1.type=reshape
reshape1.input=input[0]
reshape1.shape=-1,24,24,3

convpool1.type=conv2d_pool
convpool1.input=reshape1
convpool1.shape=5,5,3,64
convpool1.pool_type=max
convpool1.pool_size=2

norm1.type=local_norm
norm1.input=convpool1

convpool2.type=conv2d_pool
convpool2.input=norm1
convpool2.shape=5,5,64,64
convpool2.pool_type=avg
convpool2.pool_size=2

convpool3.type=conv2d_pool
convpool3.input=convpool2
convpool3.shape=5,5,64,32
convpool3.pool_type=avg
convpool3.pool_size=2

reshape2.type=reshape
reshape2.input=convpool3
reshape2.shape=-1,288

relu.type=full_connect_op
relu.input=reshape2
relu.n_in=288
relu.n_out=64
relu.op=relu

out.type=full_connect_op
out.input=relu
out.n_in=64
out.n_out=10
out.op=softmax

cost.type=norm2
cost.input=out,__label__



[cifar10_32]
input_def=f:4
label_def=i:1
layers=cost,convpool1,norm1,conv2,norm2,pool2,reshape2,relu,relu2,softmax_in,out
active=out
cost=cost

learner=movingGradient
learning_rate_type=exponential_decay
learning_rate=1e-1
learning_decay_ratio=0.1
learning_decay_step=130000

epoch=1000
batch_size=128

convpool1.type=conv2d_pool
convpool1.input=input[0]
convpool1.shape=5,5,3,64
convpool1.pool_type=max
convpool1.pool_size=3
convpool1.pool_strides=2

norm1.type=local_norm
norm1.input=convpool1

conv2.type=conv2d
conv2.input=norm1
conv2.shape=3,3,64,64

norm2.type=local_norm
norm2.input=conv2

pool2.type=pooling
pool2.input=norm2
pool2.pool_type=max
pool2.pool_size=3
pool2.pool_strides=2

reshape2.type=reshape
reshape2.input=pool2
# 2304@24 4096@32
reshape2.shape=-1,2304

relu.type=full_connect_op
relu.input=reshape2
relu.op=relu
relu.l2wd=0.004
# 2304@24 4096@32
relu.n_in=2304
relu.n_out=384
relu.weight_stddev=0.04
relu.bias_init=0.1

relu2.type=full_connect_op
relu2.input=relu
relu2.op=relu
relu2.l2wd=0.004
relu2.n_in=384
relu2.n_out=192
relu2.weight_stddev=0.04
relu2.bias_init=0.1

softmax_in.type=full_connect
softmax_in.input=relu2
softmax_in.n_in=192
softmax_in.n_out=10
softmax_in.l2wd=0.00
softmax_in.weight_stddev=0.0052

out.type=softmax
out.input=softmax_in

cost.type=softmax_entropy
cost.input=softmax_in,__label__

[cifar10_32_24]
input_count=1
layers=cost,reshape1,convpool1,norm1,conv2,norm2,pool2,reshape2,relu,relu2,softmax_in,out
active=out
cost=cost
learning_rate=1e-6
epoch=100
batch_size=128

reshape1.type=reshape
reshape1.input=input[0]
reshape1.shape=-1,24,24,3

convpool1.type=conv2d_pool
convpool1.input=reshape1
convpool1.shape=5,5,3,64
convpool1.pool_type=max
convpool1.pool_size=3
convpool1.pool_strides=2

norm1.type=local_norm
norm1.input=convpool1

conv2.type=conv2d
conv2.input=norm1
conv2.shape=3,3,64,64

norm2.type=local_norm
norm2.input=conv2

pool2.type=pooling
pool2.input=norm2
pool2.pool_type=max
pool2.pool_size=3
pool2.pool_strides=2

reshape2.type=reshape
reshape2.input=pool2
reshape2.shape=-1,2304

relu.type=full_connect_op
relu.input=reshape2
relu.n_in=2304
relu.n_out=384
relu.op=relu

relu2.type=full_connect_op
relu2.input=relu
relu2.op=relu
relu2.n_in=384
relu2.n_out=192

softmax_in.type=full_connect
softmax_in.input=relu2
softmax_in.n_in=192
softmax_in.n_out=10

out.type=softmax
out.input=softmax_in

cost.type=softmax_entropy
cost.input=softmax_in,__label__



[cifar10_32_simple]
input_count=1
layers=cost,reshape1,convpool1,convpool2,convpool3,reshape2,relu,out
active=out
cost=cost
learning_rate=1e-5
epoch=10
batch_size=200

reshape1.type=reshape
reshape1.input=input[0]
reshape1.shape=-1,32,32,3

convpool1.type=conv2d_pool
convpool1.input=reshape1
convpool1.shape=5,5,3,64
convpool1.pool_type=avg
convpool1.pool_size=2

convpool2.type=conv2d_pool
convpool2.input=convpool1
convpool2.shape=5,5,64,64
convpool2.pool_type=max
convpool2.pool_size=2

convpool3.type=conv2d_pool
convpool3.input=convpool2
convpool3.shape=5,5,64,32
convpool3.pool_type=max
convpool3.pool_size=2

reshape2.type=reshape
reshape2.input=convpool3
reshape2.shape=-1,512

relu.type=full_connect_op
relu.input=reshape2
relu.n_in=512
relu.n_out=64
relu.op=relu

out.type=full_connect_op
out.input=relu
out.n_in=64
out.n_out=10
out.op=softmax

cost.type=norm2
cost.input=out,__label__


